<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Live Scoring Golf</title>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database.js"></script>

    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            padding: 0;
        }
        h1 {
            text-align: center;
            padding: 20px;
            background-color: #4CAF50;
            color: white;
            margin: 0;
        }
        form {
            max-width: 600px;
            margin: 20px auto;
            background: #fff;
            padding: 20px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
        }
        form input, form select, form button {
            width: 100%;
            padding: 10px;
            margin: 10px 0;
            border: 1px solid #ccc;
            border-radius: 5px;
        }
        form button {
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
            border: none;
        }
        form button:hover {
            background-color: #45a049;
        }
        table {
            width: 90%;
            margin: 20px auto;
            border-collapse: collapse;
        }
        th, td {
            padding: 15px;
            text-align: center;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #4CAF50;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        tr:hover {
            background-color: #ddd;
        }
        .score-par {
            color: green;
        }
        .score-under-par {
            color: red;
        }
        .score-over-par {
            color: black;
        }
    </style>
</head>
<body>
    <h1>Live Scoring Qualification OC Men</h1>

    <!-- Formulaire pour ajouter un score -->
    <form id="scoreForm">
        <label for="player">Joueur :</label>
        <select id="player" required>
            <option value="Adam Bresnu ðŸ‡²ðŸ‡¦">Adam Bresnu ðŸ‡²ðŸ‡¦</option>
            <option value="Dominic Morton ðŸ‡¬ðŸ‡§">Dominic Morton ðŸ‡¬ðŸ‡§</option>
            <option value="Jorge de la Cabala ðŸ‡²ðŸ‡½">Jorge de la Cabala ðŸ‡²ðŸ‡½</option>
            <option value="Chase Williams ðŸ‡ºðŸ‡¸">Chase Williams ðŸ‡ºðŸ‡¸</option>
            <option value="Reda El Hali ðŸ‡²ðŸ‡¦">Reda El Hali ðŸ‡²ðŸ‡¦</option>
            <option value="Ken Gao ðŸ‡¦ðŸ‡º">Ken Gao ðŸ‡¦ðŸ‡º</option>
            <option value="Giani Perello ðŸ‡©ðŸ‡ª">Giani Perello ðŸ‡©ðŸ‡ª</option>
            <option value="Dian Wilmot ðŸ‡¿ðŸ‡¦">Dian Wilmot ðŸ‡¿ðŸ‡¦</option>
            <option value="Joseph Linel ðŸ‡«ðŸ‡·">Joseph Linel ðŸ‡«ðŸ‡·</option>
        </select>

        <label for="round">Round :</label>
        <select id="round" required>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
        </select>

        <label for="hole">Trou :</label>
        <input type="number" id="hole" min="1" max="18" required>

        <label for="score">Score :</label>
        <input type="number" id="score" required>

        <button type="submit">Ajouter le score</button>
    </form>

    <h2 style="text-align: center;">Scores en direct :</h2>
    <table>
        <thead>
            <tr>
                <th>Joueur</th>
                <th>NationalitÃ©</th>
                <th>Round</th>
                <th>Trou</th>
                <th>Score</th>
            </tr>
        </thead>
        <tbody id="scoreTable">
            <!-- Les scores en temps rÃ©el seront ajoutÃ©s ici -->
        </tbody>
    </table>

    <script>
        // Configuration Firebase (Ã  remplacer avec vos propres informations de projet Firebase)
        const firebaseConfig = {
            apiKey: "VOTRE_API_KEY",
            authDomain: "votre-projet.firebaseapp.com",
            databaseURL: "https://votre-projet.firebaseio.com",  // L'URL de votre Realtime Database
            projectId: "votre-projet-id",
            storageBucket: "votre-projet.appspot.com",
            messagingSenderId: "VOTRE_MESSAGING_SENDER_ID",
            appId: "VOTRE_APP_ID"
        };

        // Initialiser Firebase
        firebase.initializeApp(firebaseConfig);
        const database = firebase.database();
        const scoresRef = database.ref('scores');

        // Ajouter un score
        const form = document.getElementById('scoreForm');
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            const playerData = document.getElementById('player').value.split(' ');
            const player = playerData[0];
            const nationality = playerData[1];
            const round = document.getElementById('round').value;
            const hole = document.getElementById('hole').value;
            const score = document.getElementById('score').value;

            // Envoyer le score Ã  Firebase
            scoresRef.push({
                joueur: player,
                nationalite: nationality,
                round: round,
                trou: hole,
                score: parseInt(score)
            });

            form.reset(); // RÃ©initialiser le formulaire aprÃ¨s soumission
        });

        // Afficher les scores en temps rÃ©el
        scoresRef.on('value', (snapshot) => {
            const scoreTable = document.getElementById('scoreTable');
            let scoresArray = [];

            snapshot.forEach((scoreSnapshot) => {
                const scoreData = scoreSnapshot.val();
                scoresArray.push(scoreData);  // Ajouter chaque score au tableau pour trier plus tard
            });

            // Trier les scores par ordre croissant (du plus bas au plus Ã©levÃ©)
            scoresArray.sort((a, b) => a.score - b.score);

            // RÃ©initialiser le tableau
            scoreTable.innerHTML = '';

            // Ajouter les scores triÃ©s au tableau
            scoresArray.forEach((scoreData) => {
                const scoreClass = scoreData.score === 0 ? 'score-par' :
                                   scoreData.score < 0 ? 'score-under-par' : 'score-over-par';

                const newRow = `
                    <tr>
                        <td>${scoreData.joueur}</td>
                        <td>${scoreData.nationalite}</td>
                        <td>${scoreData.round}</td>
                        <td>${scoreData.trou}</td>
                        <td class="${scoreClass}">${scoreData.score}</td>
                    </tr>
                `;
                scoreTable.innerHTML += newRow;
            });
        });
    </script>
</body>
</html>
